<!DOCTYPE html>
<html lang="es"> 
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Carrito de compras</title>
    <meta
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
      name="viewport"
    />
    <link
      rel="icon"
      href="/assets/img/kaiadmin/favicon.ico"
      type="image/x-icon"
    />

    <!-- Fonts and icons -->
    <script src="/assets/js/plugin/webfont/webfont.min.js"></script>
    <script>
      WebFont.load({
        google: { families: ["Public Sans:300,400,500,600,700"] },
        custom: {
          families: [
            "Font Awesome 5 Solid",
            "Font Awesome 5 Regular",
            "Font Awesome 5 Brands",
            "simple-line-icons",
          ],
          urls: ["/assets/css/fonts.min.css"],
        },
        active: function () {
          sessionStorage.fonts = true;
        },
      });
    </script>

    <!-- CSS Files -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/assets/css/plugins.min.css" />
    <link rel="stylesheet" href="/assets/css/kaiadmin.min.css" />

    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link rel="stylesheet" href="/assets/css/demo.css" />
    <!-- Tu archivo CSS personalizado -->
    <link rel="stylesheet" href="/assets/css/style-SuperAdmin.css" />
    <style>
        .summary-card {
            background-color: #ffffff; /* Fondo blanco */
            border-radius: 8px; /* Bordes redondeados */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Sombra para efecto de profundidad */
            padding: 20px; /* Espaciado interno */
            margin: 20px 0; /* Margen alrededor de la tarjeta */
        }
        .summary-card .total-row {
            border-top: 1px solid #dee2e6; /* Borde superior para separar las filas */
            padding: 10px 0; /* Espaciado interno en las filas */
        }
        .summary-card .btn-checkout {
            background-color: #007bff; /* Color de fondo del botón */
            color: #ffffff; /* Color del texto del botón */
            border: none; /* Sin borde */
            border-radius: 50px; /* Bordes redondeados en el botón */
            padding: 10px 20px; /* Espaciado interno del botón */
            font-size: 1rem; /* Tamaño de fuente del botón */
            text-transform: uppercase; /* Texto en mayúsculas */
            display: block; /* Mostrar el botón en una nueva línea */
            margin: 20px auto 0; /* Centrar el botón horizontalmente */
        }
        .summary-card .total-row:last-child {
            border-bottom: none; /* Eliminar el borde inferior en la última fila */
        }
        .btn-checkout {
            transition: background-color 0.3s, transform 0.3s;
        }

        .btn-checkout:hover {
            background-color: #0056b3; /* Cambia el color de fondo al pasar el mouse */
            transform: scale(1.05); /* Aumenta ligeramente el tamaño del botón */
        }
        .btn-remove {
            transition: background-color 0.3s, color 0.3s;
            color: rgb(245, 45, 45);
        }

        .btn-remove:hover {
            background-color: #dc3546be; /* Cambia el color de fondo al pasar el mouse */
            color: #fff; /* Cambia el color del texto al pasar el mouse */
            transform: scale(1.1); /* Aumenta el tamaño del botón */
        }

        .btn-plus, .btn-minus {
            transition: background-color 0.3s, transform 0.3s;
        }

        .btn-plus:hover, .btn-minus:hover {
            background-color: #007bffd5; /* Cambia el color de fondo al pasar el mouse */
            transform: scale(1.1); /* Aumenta el tamaño del botón */
            color: white;
        }

    </style>


  </head>
  <body>
    <div class="wrapper">
      <!-- Sidebar -->
      <div th:replace="~{usuario/fragments/barralateralusuario :: body(activePage='compras')}"></div>
      <!-- End Sidebar -->

      <div class="main-panel">
        <div th:replace="~{usuario/fragments/navbarheaderusuario :: fragment}"></div>
        <!-- Cart Page Start -->
        <div class="container-fluid py-5">
            <div class="container py-5 d-flex flex-column min-vh-100">

                <div class="row">
                    <div class="col-lg-9">
                        <h1 class="mb-3 mt-4 "></h1>
                        <div class="table-responsive d-flex justify-content-center align-items-center flex-grow-1">
                            <table class="table text-center table-card">
                                <thead>
                                    <tr>
                                        <th scope="col">Productos</th>
                                        <th scope="col">Nombre</th>
                                        <th scope="col">Precio</th>
                                        <th scope="col">Cantidad</th>
                                        <th scope="col">Total</th>
                                        <th scope="col">Eliminar</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th scope="row">
                                            <div class="d-flex align-items-center">
                                                <img src="/assetsUsuario/img/productos/celular_samsung_a15.jpg" class="img-fluid me-5 rounded-circle" style="width: 80px; height: 80px;" alt="">
                                            </div>
                                        </th>
                                        <td>
                                            <p class="mb-0">Samsung Galaxy A15</p>
                                        </td>
                                        <td>
                                            <p class="mb-0">S/.849.99</p>
                                        </td>
                                        <td>
                                            <div class="d-flex justify-content-center align-items-center">
                                                <div class="input-group quantity" style="width: 120px;">
                                                    <div class="input-group-btn">
                                                        <button class="btn btn-sm btn-minus rounded-circle border">
                                                            <i class="fa fa-minus"></i>
                                                        </button>
                                                    </div>
                                                    <input type="text" class="form-control form-control-sm text-center border-0 qty-input" value="1" style="max-width: 40px;">
                                                    <div class="input-group-btn">
                                                        <button class="btn btn-sm btn-plus rounded-circle border">
                                                            <i class="fa fa-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <p class="mb-0">S/.1699.98</p>
                                        </td>
                                        <td>
                                            <button class="btn btn-md rounded-circle border btn-remove">
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </td>

                                    </tr>
                                    <tr>
                                        <th scope="row">
                                            <div class="d-flex align-items-center">
                                                <img src="/assetsUsuario/img/productos/MacBook-Pro-A2780-6922-1.jpg" class="img-fluid me-5 rounded-circle" style="width: 80px; height: 80px;" alt="">
                                            </div>
                                        </th>
                                        <td>
                                            <p class="mb-0">MacBook Pro A2780 Chip M2</p>
                                        </td>
                                        <td>
                                            <p class="mb-0">S/.3500.00</p>
                                        </td>
                                        <td>
                                            <div class="d-flex justify-content-center align-items-center">
                                                <div class="input-group quantity" style="width: 120px;">
                                                    <div class="input-group-btn">
                                                        <button class="btn btn-sm btn-minus rounded-circle border">
                                                            <i class="fa fa-minus"></i>
                                                        </button>
                                                    </div>
                                                    <input type="text" class="form-control form-control-sm text-center border-0 qty-input" value="1" style="max-width: 40px;">
                                                    <div class="input-group-btn">
                                                        <button class="btn btn-sm btn-plus rounded-circle border">
                                                            <i class="fa fa-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <p class="mb-0">S/.3500.00</p>
                                        </td>
                                        <td>
                                            <button class="btn btn-md rounded-circle border btn-remove" >
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row">
                                            <div class="d-flex align-items-center">
                                                <img src="/assetsUsuario/img/productos/laptop_asus_vivobook.jpg" class="img-fluid me-5 rounded-circle" style="width: 80px; height: 80px;" alt="">
                                            </div>
                                        </th>
                                        <td>
                                            <p class="mb-0">Laptop Asus Vivobook 15</p>
                                        </td>
                                        <td>
                                            <p class="mb-0">S/.1999.99</p>
                                        </td>
                                        <td>
                                            <div class="d-flex justify-content-center align-items-center">
                                                <div class="input-group quantity" style="width: 120px;">
                                                    <div class="input-group-btn">
                                                        <button class="btn btn-sm btn-minus rounded-circle border">
                                                            <i class="fa fa-minus"></i>
                                                        </button>
                                                    </div>
                                                    <input type="text" class="form-control form-control-sm text-center border-0 qty-input" value="1" style="max-width: 40px;">
                                                    <div class="input-group-btn">
                                                        <button class="btn btn-sm btn-plus rounded-circle border">
                                                            <i class="fa fa-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <p class="mb-0">S/.1999.99</p>
                                        </td>
                                        <td>
                                            <button class="btn btn-md rounded-circle border btn-remove" >
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Resumen de compra -->
                    <div class="col-lg-3">
                        <h1 class="mb-3 mt-4 "></h1>
                        <div class="card p-3">
                            <h5>Resumen de compra</h5>
                            <p>Productos (2)</p>
                            <p>Envíos (1): <strong>Gratis</strong></p>
                            <p>Total: <strong id="totalPrice">S/887</strong></p>
                            <a class="btn btn-primary btn-lg btn-block" href="/usuario/checkout">Continuar compra</a>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Pie de página -->
            <div th:replace="~{usuario/fragments/piedepagina :: fragment}"></div>
            <!-- Cart Page End -->
        </div>
      </div>
    </div>



    <!--   Core JS Files   -->
    <script src="/assets/js/core/jquery-3.7.1.min.js"></script>
    <script src="/assets/js/core/popper.min.js"></script>
    <script src="/assets/js/core/bootstrap.min.js"></script>

    <!-- jQuery Scrollbar -->
    <script src="/assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>
    <!-- Datatables -->
    <script src="/assets/js/plugin/datatables/datatables.min.js"></script>
    <!-- Kaiadmin JS -->
    <script src="/assets/js/kaiadmin.min.js"></script>
    <!-- Kaiadmin DEMO methods, don't include it in your project! -->
    <script src="/assets/js/setting-demo2.js"></script>
      <script >
          document.addEventListener('DOMContentLoaded', function () {
              // Función para actualizar el total de un producto
              function updateProductTotal(row) {
                  const priceElement = row.querySelector('td:nth-child(3) p'); // Seleccionar el precio del producto
                  const quantityElement = row.querySelector('.qty-input');     // Seleccionar el input de cantidad
                  const totalElement = row.querySelector('td:nth-child(5) p'); // Seleccionar el total del producto

                  // Convertir precio y cantidad a números
                  const price = parseFloat(priceElement.textContent.replace('S/.', '').replace(',', ''));
                  const quantity = parseInt(quantityElement.value);

                  if (!isNaN(price) && !isNaN(quantity)) {
                      const productTotal = price * quantity;
                      totalElement.textContent = `S/.${productTotal.toFixed(2)}`; // Actualizar el total del producto
                  }

                  updateTotalPrice(); // Actualizar el total general
              }

              // Función para actualizar el total general
              function updateTotalPrice() {
                  let totalPrice = 0;

                  // Recorremos todos los productos para sumar sus totales
                  document.querySelectorAll('tbody tr').forEach(row => {
                      const totalElement = row.querySelector('td:nth-child(5) p');
                      const productTotal = parseFloat(totalElement.textContent.replace('S/.', '').replace(',', ''));
                      if (!isNaN(productTotal)) {
                          totalPrice += productTotal;
                      }
                  });

                  // Actualizamos el total en el resumen
                  document.getElementById('totalPrice').textContent = `S/.${totalPrice.toFixed(2)}`;
              }

              // Evento para aumentar la cantidad
              document.querySelectorAll('.btn-plus').forEach(button => {
                  button.addEventListener('click', function () {
                      const row = this.closest('tr');
                      const input = row.querySelector('.qty-input');
                      input.value = parseInt(input.value) + 1;
                      updateProductTotal(row); // Actualizar el total del producto y el total general
                  });
              });

              // Evento para disminuir la cantidad
              document.querySelectorAll('.btn-minus').forEach(button => {
                  button.addEventListener('click', function () {
                      const row = this.closest('tr');
                      const input = row.querySelector('.qty-input');
                      if (parseInt(input.value) > 1) { // No permitimos que la cantidad sea menor que 1
                          input.value = parseInt(input.value) - 1;
                          updateProductTotal(row); // Actualizar el total del producto y el total general
                      }
                  });
              });

              // Evento para eliminar un producto del carrito
              document.querySelectorAll('.btn-remove').forEach(button => {
                  button.addEventListener('click', function () {
                      const row = this.closest('tr');
                      row.remove(); // Eliminamos la fila del producto
                      updateTotalPrice(); // Actualizamos el total general
                  });
              });

              // Llamamos a updateTotalPrice() inicialmente para calcular el total cuando la página carga
              updateTotalPrice();
          });

      </script>

  </body>
</html>
            