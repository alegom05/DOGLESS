<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>DOGLESS</title>
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport"/>
    <link rel="icon" href="/assets/img/kaiadmin/favicon.ico" type="image/x-icon"/>

    <!-- Fonts and icons -->
    <script src="/assets/js/plugin/webfont/webfont.min.js"></script>
    <script>
        WebFont.load({
            google: { families: ["Public Sans:300,400,500,600,700"] },
            custom: {
                families: ["Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands", "simple-line-icons"],
                urls: ["/assets/css/fonts.min.css"]
            },
            active: function () {
                sessionStorage.fonts = true;
            }
        });
    </script>

    <!-- CSS Files -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/assets/css/plugins.min.css"/>
    <link rel="stylesheet" href="/assets/css/kaiadmin.min.css"/>
</head>
<body>
<div class="wrapper">
    <!-- Sidebar -->
    <div th:replace="~{zonal/fragments/barralateralzonal :: body(activePage='usuarios', activeSubPage='adminzonal')}"></div>
    <!-- Main Panel -->
    <div class="main-panel">
        <!-- Navbar -->
        <div th:replace="~{zonal/fragments/navbarheaderzonal :: fragment}"></div>

        <!-- Main Content -->
        <div class="container">
            <div class="page-inner">
                <div class="d-flex align-items-left align-items-md-center flex-column flex-md-row pt-2 pb-4">
                    <div>
                        <h3 class="fw-bold mb-3">Dashboard</h3>
                        <h6 class="op-7 mb-2">Aquí verás la cifras y comparar usuarios, productos proveedores, órdenes para evaluar la participación y retención.</h6>
                    </div>
                </div>

                <!-- Dashboard Charts -->
                <div class="row">
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Top 10 productos más importados en su zona</div>
                            </div>
                            <div class="card-body">
                                <canvas id="productosMasImportadosZona"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Distribución de usuarios registrados en su zona</div>
                            </div>
                            <div class="card-body">
                                <canvas id="pieChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Top 10 usuarios con más importaciones</div>
                            </div>
                            <div class="card-body">
                                <canvas id="graficaTopImportaciones"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Cantidad de usuarios por agente</div>
                            </div>
                            <div class="card-body">
                                <canvas id="graficaCantUserPerAgent"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Productos con poco stock para reposición</div>
                            </div>
                            <div class="card-body">
                                <canvas id="productosPocoStock"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Distribución de ordenes por zona</div>
                            </div>
                            <div class="card-body">
                                <canvas id="ordenesPorZona"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div th:replace="~{zonal/fragments/piedepagina :: fragment}"></div>
        </div>
    </div>

    <!-- JS Files -->
    <script src="assets/js/core/jquery-3.7.1.min.js"></script>
    <script src="assets/js/core/popper.min.js"></script>
    <script src="assets/js/core/bootstrap.min.js"></script>
    <script src="assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>
    <script src="assets/js/plugin/chart.js/chart.min.js"></script>

    <script>
        window.onload = function(){
            // Chart 1: Top 10 productos más importados
            var ctx1 = document.getElementById('productosMasImportadosZona').getContext('2d');
            var productosMasImportadosData = {
                labels: ['Hogar', 'Tecnologia', 'Joyeria', 'Juguetes', 'Mascotas'],
                datasets: [{
                    label: 'Productos vendidos por categoria',
                    data: [34, 41, 31, 34, 36],
                    backgroundColor: 'rgba(30, 197, 255, 0.8)',
                    borderColor: 'rgba(30, 140, 255, 0.8)',
                    borderWidth: 1
                }]
            };
            var verticalChartOptions1 = { scales: { y: { beginAtZero: true } }, responsive: true, maintainAspectRatio: false };
            new Chart(ctx1, { type: 'bar', data: productosMasImportadosData, options: verticalChartOptions1 });

            // Chart 2: Distribución de usuarios registrados
            var pieChart = document.getElementById("pieChart").getContext("2d");
            var activos = /*[[${activos}]]*/ 0;
            var inactivos = /*[[${inactivos}]]*/ 0;
            new Chart(pieChart, {
                type: "pie",
                data: {
                    datasets: [{ data: [activos, inactivos], backgroundColor: ["#1d7af3", "#f3545d"], borderWidth: 0 }],
                    labels: ["Activos", "Inactivos"]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: "bottom" } } }
            });

            // Chart 3: Top 10 usuarios con más importaciones
            var ctx3 = document.getElementById('graficaTopImportaciones').getContext('2d');
            var topImportacionesData = {
                labels: ['Robert', 'Aaron', 'Wilder', 'Elias', 'Jorge'],
                datasets: [{
                    label: 'Numero de importaciones',
                    data: [16, 25, 33, 24, 15],
                    backgroundColor: 'rgba(75, 192, 192, 0.5)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            };
            var horizontalChartOptions = { indexAxis: 'y', scales: { x: { beginAtZero: true } } };
            new Chart(ctx3, { type: 'bar', data: topImportacionesData, options: horizontalChartOptions });

            // Chart 4: Cantidad de usuarios por agente
            var ctx4 = document.getElementById('graficaCantUserPerAgent').getContext('2d');
            var usuariosPorAgenteData = {
                labels: ['Paolo', 'Daniel', 'Elio', 'Ricardo', 'Pedro', 'Gerardo'],
                datasets: [{
                    label: 'Número de usuarios por agentes',
                    data: [50, 75, 60, 70, 30, 54],
                    backgroundColor: 'rgba(240, 11, 14, 0.8)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }]
            };
            new Chart(ctx4, { type: 'bar', data: usuariosPorAgenteData, options: horizontalChartOptions });

            // Chart 5: Productos con poco stock
            var ctx5 = document.getElementById('productosPocoStock').getContext('2d');
            var pocoStockData = {
                labels: ['Samsung Galaxy S24', 'LG Oled TV', 'Sony PS4', 'Nintendo Wii U', 'Zephyrus G16'],
                datasets: [{
                    label: 'Productos con menos stock',
                    data: [12, 9, 17, 15, 14],
                    backgroundColor: 'rgba(255, 154, 30, 0.8)',
                    borderColor: 'rgba(255, 125, 30, 0.8)',
                    borderWidth: 1
                }]
            };
            new Chart(ctx5, { type: 'bar', data: pocoStockData, options: verticalChartOptions1 });

            // Chart 6: Distribución de ordenes por zona
            var ctx6 = document.getElementById('ordenesPorZona').getContext('2d');
            var ordenesPorZonaData = {
                labels: ['Norte', 'Sur', 'Este', 'Oeste'],
                datasets: [{
                    label: 'Zonas de seguimiento',
                    data: [83, 72, 98, 58],
                    backgroundColor: 'rgba(255, 219, 30, 0.8)',
                    borderColor: 'rgba(255, 182, 30, 0.8)',
                    borderWidth: 1
                }]
            };
            new Chart(ctx6, { type: 'bar', data: ordenesPorZonaData, options: verticalChartOptions1 });
        };
    </script>
</div>
</body>
</html>
